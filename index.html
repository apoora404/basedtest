<!doctype html>
<html lang="ko" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Basedapp Simulator & Analyzer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    :root {
      color-scheme: dark;
      --bg: #0e0f12; --panel: #16181d; --panel-solid:#121419; --border: #242833;
      --text-main: #e8eaee; --text-muted: #98a2af;
      --accent: #ff6a3d; --ok: #2ad7a3; --danger: #ff6b6b;
      --ring: 0 0 0 3px rgba(255,106,61,.35);
      --input-bg: #101217;
    }
    [data-theme='light'] {
      color-scheme: light;
      --bg: #f0f2f5; --panel: #ffffff; --border: #dcdfe3;
      --text-main: #1f2328; --text-muted: #656d76;
      --accent: #f56565; --ok: #38a169; --danger: #e53e3e;
      --ring: 0 0 0 3px rgba(245,101,101,.35);
      --input-bg: #f0f2f5;
    }
    body{ background: var(--bg); color: var(--text-main); transition: background .2s, color .2s; }
    .card{ background: var(--panel); border: 1px solid var(--border); }
    .muted{ color: var(--text-muted); }
    .btn-accent{ background: var(--accent); color: white; }
    .btn-accent:hover{ filter: brightness(1.05); }
    .btn-ghost{ background:var(--input-bg); border:1px solid var(--border); color:var(--text-main); }
    input,select{
      background: var(--input-bg); border: 1px solid var(--border); color: var(--text-main);
      border-radius: 12px; padding: .65rem .8rem; width: 100%;
    }
    input[type="radio"]{ width:auto; margin-right: 0.5rem; }
    input:focus,select:focus{ outline: none; box-shadow: var(--ring); border-color: var(--accent); }
    .num{ font-variant-numeric: tabular-nums; }
    .kv{ display: flex; gap: .5rem; align-items: baseline; }
    .kv .k{ min-width: 10.5rem; color: var(--text-muted); }
    .kv .v{ font-weight: 700; }
    .badge{ background:var(--input-bg); border:1px solid var(--border); padding:.18rem .55rem; border-radius:999px; }
    .text-ok{ color: var(--ok); }
    .text-danger{ color: var(--danger); }
    .tab{ padding: .5rem 1rem; border-bottom: 2px solid transparent; color: var(--text-muted); cursor: pointer; transition: color .2s, border-color .2s; }
    .tab.active{ color: var(--accent); border-bottom-color: var(--accent); font-weight: 600; }
  </style>
</head>
<body class="pb-28">
  <header class="max-w-5xl mx-auto px-4 py-7 relative">
    <div class="rounded-3xl border border-[var(--accent)]/60 p-3 mx-auto w-fit">
      <div class="rounded-2xl px-5 py-3 bg-[var(--panel)] text-center">
        <h1 class="text-2xl font-semibold">Basedapp Simulator & Analyzer</h1>
      </div>
    </div>
    <button id="theme-toggle" class="absolute top-8 right-8 p-2 rounded-full bg-[var(--panel)] border border-[var(--border)]">
      <svg id="theme-icon-light" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.706-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 7.072l.707-.707a1 1 0 10-1.414-1.414l-.707.707a1 1 0 101.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
      <svg id="theme-icon-dark" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
    </button>
  </header>

  <main class="max-w-5xl mx-auto px-4 space-y-6">
    <section class="card rounded-2xl p-4 space-y-4">
      <div class="flex border-b border-[var(--border)]">
        <button id="tabSimulator" class="tab active">목표 시뮬레이터</button>
        <button id="tabAnalyzer" class="tab">거래 분석</button>
      </div>
      
      <div id="simulatorInputs" class="space-y-4 pt-4">
        </div>

      <div id="analyzerInputs" class="hidden space-y-4 pt-4">
        </div>
    </section>

    <section id="resultCard" class="card rounded-2xl p-4">
        <div class="flex items-center justify-between pb-2 border-b border-[var(--border)]">
            <div class="flex items-center gap-2">
                <h3 class="font-semibold text-lg">결과</h3>
                <span id="resultBadge" class="badge text-xs"></span>
            </div>
            <div class="flex gap-2">
              <button id="copyBtn" class="btn-ghost px-3 py-1.5 rounded-lg text-sm">복사</button>
              <button id="pngBtn" class="btn-ghost px-3 py-1.5 rounded-lg text-sm">PNG 저장</button>
            </div>
        </div>
        <div id="out" class="space-y-2 mt-3"></div>
    </section>
  </main>
  
  <footer class="mt-6 py-4 border-t border-[var(--border)] text-center text-sm text-[var(--muted)]">
    2025 Brought to you by
    <a href="https://twitter.com/no_gongju" target="_blank" rel="noopener"
       class="ml-1 text-[var(--accent)] hover:underline">@no_gongju</a>
  </footer>

  <script>
    const FEES = { /* ... 전체 수수료 데이터베이스 ... */ };
    const BUILDER_FEE_RATES = { /* ... */ };
    const XP_PER_DOLLAR_BASE = { /* ... */ };

    // ... (이하 모든 JavaScript 함수 포함)
  </script>
</body>
</html>
